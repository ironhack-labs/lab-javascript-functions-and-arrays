if (
  typeof mat[i][j] != 'undefined' &&
  typeof mat[i][j + 1] != 'undefined' &&
  typeof mat[i][j + 2] != 'undefined' &&
  typeof mat[i][j + 3] != 'undefined'
) 
if (
  typeof mat[i][j] != 'undefined' &&
  typeof mat[i + 1][j] != 'undefined' &&
  typeof mat[i + 2][j] != 'undefined' &&
  typeof mat[i + 3][j] != 'undefined'
) {